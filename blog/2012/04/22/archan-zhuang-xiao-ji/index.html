
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Arch安装小记 - Allocator</title>
	<meta name="author" content="Yutang Chung">

	
	<meta name="description" content="前言 这次安装ArchLinux的冲动来自于LPY师弟，这个技术宅师弟喜欢钻研东西，还有Maple师兄。他们都建议我说用ArchLinux更加深入底层，有更多的机会去定制和体验过程，对于学习很有好处。当然这个其中一个原因，另外一个原因就是有一个很坑的测试你最适合用哪个Linux发行版的测试， &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Allocator" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	
</head>

<body>
	<div class="container">
		<div class="left-col">
			<header id="header" class="inner"><div class="profilepic">	
	<img src="/images/dp.jpg" alt="Profile Picture" style="width: 160px;">
</div>
<h1><a href="/">Allocator</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">博客</a></li>
	<li><a href="/blog/archives">文章列表</a></li>
</ul>
</nav>
<br/>
<h3 class="alignleft">汇聚在学习中遇到的问题，感受解决问题带来的快乐</h3>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/zonyitoo?rel=author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/zonyitoo" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/Zonyitoo" title="GitHub">GitHub</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>

</header>
		</div>		
		<div class="mid-col">
			
				
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/zonyitoo">zonyitoo</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('zonyitoo', 4, false);
	})(jQuery);
</script>

			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post">
	<h1 class="title">Arch安装小记</h1>
	<div class="entry-content"><h1>前言</h1>

<p>这次安装<strong>ArchLinux</strong>的冲动来自于<strong>LPY师弟</strong>，这个技术宅师弟喜欢钻研东西，还有<strong>Maple师兄</strong>。他们都建议我说用<strong>ArchLinux</strong>更加深入底层，有更多的机会去定制和体验过程，对于学习很有好处。当然这个其中一个原因，另外一个原因就是有一个很坑的<a href="http://www.zegeniestudios.net/ldc/">测试你最适合用哪个Linux发行版</a>的测试，得出的结果是</p>

<blockquote><p>Ubuntu 100%
OpenSUSE 100%
Mandriva 100%
…下面就是LinuxMint，Fedora…</p></blockquote>

<p>反正意思就是，我最好还是用一些比较高级的发行版，Gentoo、Arch这些发行版还是不适合我的= =。看了之后很不爽，浑身都不爽。于是拿起U盘向<strong>Zero</strong>拿了个<strong>ArchLinux i686</strong>版本写到盘上然后二话不说就把Ubuntu 11.10的盘全格了重新分了区。虽然是有点冲动，冲动得就只保存了<code>.vimrc</code>和<code>.vim</code>和<strong>eclipse</strong>的workspace就马上全盘格掉！</p>

<h1>准备工作</h1>

<p>首先当然是要先去<a href="http://http//www.archlinux.org/">官网</a>下一个iso了。它分成三种，i686(32-bit), x86_64(amd64), Dual Architecture(x86 + x86_64合体).</p>

<p>下了得到个iso，然后写入U盘里。当然你可以刻成碟..。刻入U盘的方法很多，可以用一个通用的方法</p>

<p>&#8220;bash
dd if=iso_name of=/dev/sd&#8221;x&#8221;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>其中，“x“必须是a, b, c, …，不要写成sdb1…因为是要写到整个U盘中去，所以要先备份一下。
</span><span class='line'>
</span><span class='line'>然后，那就是备份一下当前系统中的东西了。如果是已经把`/home`单独作一个分区的话，可以不用格掉那个分区但是还是备份一下为妙。
</span><span class='line'>
</span><span class='line'>最后，看一下你的硬盘分区记录，记一下哪个是sda1, sda2, sda3 ….
</span><span class='line'>
</span><span class='line'>THEN, 重启，插入，设BIOS，开机…
</span><span class='line'>
</span><span class='line'># 安装
</span><span class='line'>**ArchLinux**的安装和**Ubuntu**、**Fedora**、**OpenSUSE**的安装过程不太一样（我又想起了那个测试），基本上都是一个蓝底界面操作，不过玩久了还是很容易看懂的。建议先看[ArchWiki](https://wiki.archlinux.org/index.php/Main_Page)然后再装。
</span><span class='line'>
</span><span class='line'>直接在引导界面那里点Arch Linux，然后就会进入到U盘里面的那个系统里，默认就是以root登录的。那么就可以直接执行
</span></code></pre></td></tr></table></div></figure>


<p>bash
/arch/setup</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>然后就直接进入了安装程序。我是用core版的iso安装的，所以安装过程不用连网，如果是下了net版的，那可以看一下Wiki的相应部分。
</span><span class='line'>
</span><span class='line'>刚开始是设置时钟（UTC），设置编辑器（vi），括号是我的选择
</span><span class='line'>
</span><span class='line'>然后便是分区。这个工具真用来分区的话就太不好用了。所以我是在安装之前用Ubuntu的分区工具先分好区然后再过来装。如果是直接在这里装，那可以在运行`/arch/setup`之前运行`fdisk`来分区（用Alt+F3切换到另一个虚拟控制台）。在选项中
</span><span class='line'>
</span><span class='line'>* Auto-Prepare（使用整个硬盘，安装程序给你分区，极不推荐）
</span><span class='line'>* Manually partition hard drives（手动配置硬盘，就是在这里分区）
</span><span class='line'>* Manually configure block devices, filesystems and mountpoints（手动配置块设备、文件系统和挂载点）
</span><span class='line'>* Roolback last filesystem changes（撤销最后更改）
</span><span class='line'>
</span><span class='line'>这些步骤完了之后就进到下一部，**选择软件包**
</span><span class='line'>
</span><span class='line'>* 首先选择GRUB还是syslinux作为启动加载器，我先GRUB
</span><span class='line'>* 然后选软件包组，有两个
</span><span class='line'>
</span><span class='line'>  * base 来自[core]软件源的最小基本系统，总是选中它并删除不用的软件包
</span><span class='line'>  * base-devel 除了上面的工具还有附加工具如make和automake，建议用这个。（我进去之后还把其它所有的都选上了）
</span><span class='line'>
</span><span class='line'>然后就安装软件包了，这个过程是等得最久的，5分钟左右。
</span><span class='line'>
</span><span class='line'>然后就配置系统，因为**Arch之道**倡导纯粹性和开放性，不向用户隐藏任何过程，所以就一个一个配置文件给你过目之后再写入。通过看这些配置文件，你发现你会更加深入了解系统的最基本配置。
</span><span class='line'>
</span><span class='line'>#### /etc/rc.conf
</span><span class='line'>**ArchLinux**使用`/etc/rc.conf`作为系统的主要配置文件。这个文件包含了广泛的配置信息，主要用于系统的启动。正如文件所说，它还包含了供`/etc/rc*`使用的配置信息。
</span><span class='line'>
</span><span class='line'>#### LOCALIZATION部分
</span><span class='line'>* LOCALE 是系统本地化设置，所有国际化的应用程序都会使用这个设置。运行locale -a可以显示可用设置。默认是en_US.UTF-8，如果要改成中文那就是zh_CN.UTF-8，但建议先不要改，因为虚拟控制台是不支持中文的，装了X之后再改也不迟
</span><span class='line'>* DAEMON_LOCALE 是否使用本地daemon，是yes那就是用$LOCALE作为环境变量
</span><span class='line'>* HARDWARECLOCK 刚才设的UTC
</span><span class='line'>* TIMEZONE 刚才设的时区
</span><span class='line'>* KEYMAP 默认是us
</span><span class='line'>* CONOLEFONT 控制台用的字体
</span><span class='line'>* CONSOLEMAP 定义了启动时setfont程序加载的控制台映射表
</span><span class='line'>* USECOLOR 如果用的是彩色显示器那就是“yes”
</span><span class='line'>
</span><span class='line'>我的LOCALIZATION
</span></code></pre></td></tr></table></div></figure>


<p>bash
LOCALE=”en_US.UTF-8”
DAEMON_LOCALE=”no”
HARDWARECLOCK=”UTC”
TIMEZONE=”Asia/Hong_Kong”
KEYMAP=”us”
CONSOLEFONT=
CONSOLEMAP=
USECOLOR=”yes”</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>#### HARDWARE部分
</span><span class='line'>* MODULES 可以在这里指定缺少那个模块
</span><span class='line'>
</span><span class='line'>可以暂时什么都不写。
</span><span class='line'>
</span><span class='line'>#### NETWORKING部分
</span><span class='line'>* HOSTNAME 随意设置，你的主机名字
</span><span class='line'>* 然后设置网络，在宿舍用校园网的话直接用dhcp设置，即只需要interface=eth0
</span><span class='line'>
</span><span class='line'>#### DAEMONS部分
</span><span class='line'>开机需要启动的脚本名字
</span><span class='line'>
</span><span class='line'>* 如果脚本名字前有！号，表示它不被执行
</span><span class='line'>* 如果脚本名字前有@符号，则表示它会在后台被执行，即启动序列不等待脚本运行成功就会继续执行下一个脚本
</span><span class='line'>
</span><span class='line'>后面安装图形界面之后还会用到这个序列
</span><span class='line'>
</span><span class='line'>#### /etc/fstab
</span><span class='line'>这个文件来用指定启动挂载的磁盘和分区
</span><span class='line'>
</span><span class='line'>**接下来的基本都可以不用修改直接保存**
</span><span class='line'>
</span><span class='line'>#### /etc/locale.gen
</span><span class='line'>这个文件是被命令`locale-gen`所读取，记录系统的locales信息，这些设置会用于本地化程序用于本地化显示。选出**zh_CN**的行，把前面的#移除就行。
</span><span class='line'>
</span><span class='line'>#### /etc/pacman.conf
</span><span class='line'>pacman在会每启动时都访问这个文件，这个文件定义了源和段（options），直接删除一些`include=`和`[repository]`前面的#号删掉就可以启用对应的源
</span><span class='line'>
</span><span class='line'>安装的时候，默认设置就行了。
</span><span class='line'>
</span><span class='line'>#### /etc/pacman.d/mirrorlist
</span><span class='line'>看名字就知道，这个是为**pacman**选择镜像的文件，上面已经写好了一些**China**的镜像源，有两个教育网源，晚上更新非常快。
</span><span class='line'>
</span><span class='line'>#### Root密码
</span><span class='line'>这就不用解释了
</span><span class='line'>
</span><span class='line'>#### 安装启动加载器，即GRUB
</span><span class='line'>同样，安装程序也把`/boot/grub/menu.lst`放出来给你过目。如果有windows，那就把最后那段关于win的引导注释弄掉，那就可以注释了。它默认是在首分区，如果你的win在首分区，那就不用改，不然就要改一下`root (hd0, 0)`
</span><span class='line'>
</span><span class='line'>**OK，到这里就算装完了系统了，回到界面，reboot重启，把U盘拔了就行。**
</span><span class='line'>
</span><span class='line'># 进入系统
</span><span class='line'>进入系统之后要登录，那肯定是只有root
</span><span class='line'>
</span><span class='line'>登录之后先连网。怎么连？如果要连无线，那就要看看**ArchWiki**里面的相关说明。我在安装的时候并未能识别我的无线网卡，所以我是采用连校园网的方式上网的。
</span><span class='line'>
</span><span class='line'>## 连接校园网
</span><span class='line'>连接校园网，首先就要使用一个客户端[YaH3C](https://github.com/humiaozuzu/YaH3C)，用GIT把它CLONE到本地，然后保存在U盘上。
</span><span class='line'>
</span><span class='line'>YaH3C是使用Python2.x的，所以要运行它还得装Python（Arch并不自带），所以还要到[Python官网](http://python.org/)下一个2.7.3的源码包，也放到U盘里。
</span><span class='line'>
</span><span class='line'>OK，准备完毕，开始装YaH3C
</span><span class='line'>
</span><span class='line'>#### 安装Python2.7.3和YaH3C
</span><span class='line'>先把U盘插进电脑，然后把它挂载到一个地方（我用`/media/CONVEYOR`）
</span></code></pre></td></tr></table></div></figure>


<p>bash
mount /dev/sdb1 /media/CONVEYOR</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>然后把它们都制到主文件夹并解压安装（因为没有装相关的对U盘的FAT文件系统的东西，所以是不能往里面写）
</span></code></pre></td></tr></table></div></figure>


<p>bash
cp -r YaH3C ~
cp Python-2.7.3.tgz ~
cd ~
tar -xvf Python-2.7.3.tgz</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>最后当然就是安装这两个了，先安装Python
</span></code></pre></td></tr></table></div></figure>


<p>bash
cd Python-2.7.3
./configure
make
make install</p>

<h1>上面过程比较久，可以找点东西做做</h1>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>然后为了以后使用，先加一个用户，增加用户用`adduser`，增加用户组用`groupadd`
</span><span class='line'>
</span><span class='line'>然后把新建的用户加入`sudoers`，就是向`/etc/sudoers`里面加
</span><span class='line'>
</span><span class='line'>  username    ALL=(ALL) ALL
</span><span class='line'>
</span><span class='line'>然后`exit`，用你的用户名登录，再运行`sudo yah3c`，如无意外，是可以登录的！
</span><span class='line'>
</span><span class='line'>登录之后，还要一步`sudo dhcpcd eth0`，这就可以上网了！！
</span><span class='line'>
</span><span class='line'># 更新
</span><span class='line'>由于iso是2011年的了，所以现在已经有很多的更新，那就先更新了系统再说。
</span><span class='line'>
</span><span class='line'>先修改`/etc/pacman.conf`，将SigLevel设为”Never”，没有就手动加上（我装x86_64版的时候发现默认没有，而i686版默认就是Never）
</span><span class='line'>
</span><span class='line'>然后执行
</span></code></pre></td></tr></table></div></figure>


<p>bash
pacman-key &#8211;init
pacman -S filesystem &#8211;force
rm /etc/profile.d/locale.sh
pacman -Syu</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>我在`pacman-key --init`这一步一直卡着不能过，于是就直接跳过了，发现也可以用，可能与SigLevel="Never"有关吧。
</span><span class='line'>**2012-10-22更新：其实是因为没有收集到足够的随机数据，遇到这种问题时先执行`pacman-key --init`然后在键盘乱按「要乱按很久」，记住是乱按，然后就能生成了**
</span><span class='line'>
</span><span class='line'>它会先升级**pacman**然后再升级系统，这里慢慢等上一段时间，深夜速度很快！
</span><span class='line'>
</span><span class='line'># 装Gnome3
</span><span class='line'>在装这个之前我也装了不少东西，比如vim什么的先装好，那样就不用去用那个无比简陋的vi了。
</span><span class='line'>
</span><span class='line'>#### 安装基础安装包
</span><span class='line'>Xorg
</span></code></pre></td></tr></table></div></figure>


<p>bash
pacman -S xorg-server xorg-xinit xorg-utils xorg-server-utils</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mesa用于3D支持，3D工具glxgears和glxinfo都在mesa-demos里
</span></code></pre></td></tr></table></div></figure>


<p>bash
pacman -S mesa mesa-demos</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>安装显卡驱动
</span><span class='line'>
</span><span class='line'>* 先通过lspci看看你的是什么显卡
</span><span class='line'>* 通过`pacman -Ss xf86-video`看看有什么开源驱动可以用
</span><span class='line'>
</span><span class='line'>如果是用intel集显，那就可以装`xf86-video-intel`，或者是`xf86-video-ati`或`xf86-video-nv`，如果是想装闭源驱动，可以看**ArchWiki**相应部分，我直接用集显，然后把独显关掉，省电而且发热少。
</span><span class='line'>
</span><span class='line'>安装输入设备，笔记本要装触摸驱动
</span></code></pre></td></tr></table></div></figure>


<p>bash
pacman -S xf86-input-synaptics</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>装测试用的基本图形界面
</span></code></pre></td></tr></table></div></figure>


<p>bash
pacman -S xorg-twm xorg-xclock xterm
rm ~/.xinit</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>安装消息总线DBUS
</span></code></pre></td></tr></table></div></figure>


<p>bash
pacman -S dbus</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>然后现在就可以直接执行`startx`，理论上应该能看到一个简单的图形界面，上面有一些简单的可移动窗口和鼠标。如果验证完之后，在那个终端上输入`exit`就能退出。
</span><span class='line'>
</span><span class='line'>&gt; 黑了屏怎么办？重启吧…
</span><span class='line'>
</span><span class='line'>#### 安装字体和Gnome
</span></code></pre></td></tr></table></div></figure>


<p>bash
pacman -S ttf-dejavu wqy-zenhei gnome gnome-extra gdm</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>其中`gnome-extra`可以选择一些你觉得有用的组件来装
</span><span class='line'>
</span><span class='line'>写入`~/.xinitrc`启动gnome-session
</span></code></pre></td></tr></table></div></figure>


<p>sh</p>

<h1>ONLY THIS LINE</h1>

<p>exec ck-launch-session gnome-session</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>&gt; 如果是x86_64，那么中间的ck-launch-session就不用写了
</span><span class='line'>
</span><span class='line'># 启动Gnome3！
</span><span class='line'>如无意外，直接执行`startx`即可启动Gnome3！
</span><span class='line'>
</span><span class='line'>可能刚进去是一个Fallback的状态，那么可以Logout一下再进一次，就可以了。如果一直是Fallback状态，那可能驱动装得有问题。
</span><span class='line'>
</span><span class='line'>记得，不是用root来执行`startx`的。
</span><span class='line'>
</span><span class='line'># 配置Gnome3
</span><span class='line'>#### 修改/etc/inittab
</span><span class='line'>
</span><span class='line'>  改动1：
</span><span class='line'>  ## Only one of the following two lines can be uncommented!
</span><span class='line'>  # Boot to console
</span><span class='line'>  #id:3:initdefault:
</span><span class='line'>  # Boot to X11
</span><span class='line'>  id:5:initdefault:
</span><span class='line'>  
</span><span class='line'>  改动2：
</span><span class='line'>  # Example lines for starting a login manager
</span><span class='line'>  #x:5:respawn:/usr/bin/xdm -nodaemon
</span><span class='line'>  x:5:respawn:/usr/sbin/gdm -nodaemon
</span><span class='line'>  #x:5:respawn:/usr/bin/kdm -nodaemon
</span><span class='line'>  #x:5:respawn:/usr/bin/slim &gt;/dev/null 2&gt;&1
</span><span class='line'>
</span><span class='line'>#### /etc/rc.conf
</span><span class='line'>
</span><span class='line'>  （1）中文化
</span><span class='line'>  LOCALE="zh_CN.UTF-8"
</span><span class='line'>  #LOCALE="en_US.UTF-8"
</span><span class='line'>  DAEMON_LOCALE="no"
</span><span class='line'>  HARDWARECLOCK="localtime"
</span><span class='line'>  TIMEZONE="Asia/Shanghai"
</span><span class='line'>  
</span><span class='line'>  （2）将开机加载的模块添加到MODULES的模块中。
</span><span class='line'>  MODULES=(fuse )
</span><span class='line'>  
</span><span class='line'>  （3）开机启动服务。@代表在后台（background）运行。
</span><span class='line'>  DAEMONS=(hwclock syslog-ng dbus network netfs crond gdm @networkmanager )
</span><span class='line'>
</span><span class='line'>安装读写ntfs分区的`ntfs-3g`
</span></code></pre></td></tr></table></div></figure>


<p>bash
pacman -S ntfs-3g
&#8220;`</p>

<p><strong>Ok，现在是装完了，reboot试试？</strong></p>

<h1>后记</h1>

<p>这次冲动安装ArchLinux也不是完全没有准备的，在之前就一直在虚拟机上面玩Arch，对它的一些命令也算是用过，不陌生。另外在最近一直在看ArchWiki的东西，所以安装起来并不是太费力。主要出的问题在于安装YaH3C的时候（这个是失误，没有用最新版的YaH3C），然后就是安装图形界面时候的事。在Wiki上<code>.xinitrc</code>里面写的是有那个<code>ck-launch-session</code>，在装完<code>x86_64</code>系统之后呢就发现这样子直接<code>startx</code>是不能成功启动图形界面的，在这里纠结了许久，排除了各种原因之后，最终万念俱灰的时候就想去试试把这句删了会怎样，结果删了就行了。</p>

<p>这次的安装看上去好像步骤不多，但我是从昨天晚上10点左右开始准备装，到今天下午5点多才宣告软件完全装好。所以系统还是不要乱重装，毕竟比较麻烦。而且时间大多都花在适应Arch上，因为以前在Ubuntu下用Apt-get可以把大多数的事情都帮我做好，而现在用pacman装的话，基本上就只会给我装好了软件包，而配置工作就交给我了。而且还有一些奇奇怪怪的问题会出现，翻了N页Google之后还是无果，解决还得靠自己的创造力，想想可能会是什么原因然后再换个方向去搜，最后恍然大悟的感觉非常的爽，让人非常享受。</p>

<p>下一篇，讲一下记录着我安装其它软件时遇到的小问题及解决方法。</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">评论</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2013

    Yutang Chung


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'sysuzonyitooblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://zonyitoo.github.com/blog/2012/04/22/archan-zhuang-xiao-ji/';
        var disqus_url = 'http://zonyitoo.github.com/blog/2012/04/22/archan-zhuang-xiao-ji/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-36473925-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



		</div>
	</div>
</body>
</html>
